<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="format-detection" content="telephone=no" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700&family=Noto+Sans+KR:wght@700&display=swap" rel="stylesheet">
  <link rel="icon" href="./images/favicon.ico" />
  <link rel="stylesheet" href="styles.css" />
  <link
          href="https://hangeul.pstatic.net/hangeul_static/css/nanum-myeongjo.css"
          rel="stylesheet"
  />
  <link
          rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.css"
  />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- services 라이브러리 불러오기 -->
  <script src="//dapi.kakao.com/v2/maps/sdk.js?appkey=b439285fe3079252be5db38521b9331b&libraries=services"
          type="text/javascript"></script>
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"
          integrity="sha384-TiCUE00h649CAMonG018J2ujOgDKW/kVWlChEuu4jK2vxfAAD0eZxzCKakxg55G4" crossorigin="anonymous"></script>
  <script>
    Kakao.init('b439285fe3079252be5db38521b9331b'); // 사용하려는 앱의 JavaScript 키 입력
  </script>

<!--  <title>지원과 두현의 결혼식에 초대합니다</title>-->
</head>
<body>
<div class="container">
  <img src="./images/01.png" class="base-img" alt="Image 01" />
  <div
          class="swiper-title"

  >
    <div class="swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide" ><img class="base-img" src="./images/slide1.png" /></div>
        <div class="swiper-slide" ><img class="base-img" src="./images/slide2.png" /></div>
        <div class="swiper-slide" ><img class="base-img" src="./images/slide3.png" /></div>
        <div class="swiper-slide" ><img class="base-img" src="./images/slide4.png" /></div>
        <div class="swiper-slide" ><img class="base-img" src="./images/slide5.png" /></div>
        <div class="swiper-slide" ><img class="base-img" src="./images/slide6.png" /></div>
        <div class="swiper-slide" ><img class="base-img" src="./images/slide7.png" /></div>
        <div class="swiper-slide" ><img class="base-img" src="./images/slide8.png" /></div>
        <div class="swiper-slide" ><img class="base-img" src="./images/slide9.png" /></div>
      </div>
      <div class="swiper-pagination"></div>
    </div>
    <img src="./images/03.png" class="base-img" alt="Image 04" />
    <div class="mt-8 text-left tracking-tighter">
      <div id="map" class="my-4" style="width: 380px; height: 380px"></div>
      <div class="italic mb-6" style="font-family: 'Pretendard Variable';">
        <div class="flex justify-evenly mt-2">
          <a href="nmap://search?query=용산가족공원 야외예식장" style="width: 40px">
            <img src="./images/navermap.png">
          </a>
          <a href="kakaomap://search?q=용산가족공원 야외예식장" style="width: 40px">
            <img src="./images/kakaomap.png">
          </a>
          <a href="tmap://search?name=국립중앙박물관 주차장" style="width: 40px">
            <img src="./images/tmap.png">
          </a>
          <a id="start-navigation" href="javascript:startNavigation()" style="width: 40px">
            <img src="./images/kakaonavi.png">
          </a>
        </div>
      </div>
    </div>
    <img src="./images/06.png" class="base-img" alt="Image 02" />
    <img src="./images/07.png" class="base-img" alt="Image 02" />
    <div class="bank-account-container">
      <div class="button-container">
        <button
                class="button"
                style="background-image: url('./images/button_01.png')"
                onclick="openDialog('dialog1')"
        ></button>
        <button
                class="button"
                style="background-image: url('./images/button_02.png')"
                onclick="openDialog('dialog2')"
        ></button>
      </div>
    </div>
    <dialog id="dialog1" class="custom-dialog">
      <button class="close-button" onclick="document.getElementById('dialog1').close()"></button>
      <p class="dialog-title">신랑측 계좌번호</p>
      <div class="dialog-content-container">
        <div class="flex-container">
          <div class="bank-detail-container">
            <span class="info1">여상우</span>
          </div>
          <div class="copy-button-container">
            <p class="number">카카오뱅크<br>3333-03-2872947</p>
            <button class="copy-button" data-account="3333-03-2872947">복사</button>
          </div>
          <p class="copy-notification" data-account="3333-03-2872947"></p>
        </div>
        <div class="flex-container">
          <div class="bank-detail-container">
            <span class="info1">오이자</span>
          </div>
          <div class="copy-button-container">
            <p class="number">국민은행<br>670602-01-131503</p>
            <button class="copy-button" data-account="670602-01-131503">복사</button>
          </div>
          <p class="copy-notification" data-account="670602-01-131503"></p>
        </div>
      </div>
    </dialog>
    <dialog id="dialog2" class="custom-dialog">
      <button class="close-button" onclick="document.getElementById('dialog2').close()"></button>
      <p class="dialog-title">신부측 계좌번호</p>
      <div class="dialog-content-container">
        <div class="flex-container">
          <div class="bank-detail-container">
            <span class="info1">안예지</span>
          </div>
          <div class="copy-button-container">
            <p class="number">카카오뱅크<br>7979-2943-502</p>
            <button class="copy-button" data-account="7979-2943-502">복사</button>
          </div>
          <p class="copy-notification" data-account="7979-2943-502"></p>
        </div>
        <div class="flex-container">
          <div class="bank-detail-container">
            <span class="info1">안명찬</span>
          </div>
          <div class="copy-button-container">
            <p class="number">하나은행<br>224-910048-05507</p>
            <button class="copy-button" data-account="224-910048-05507">복사</button>
          </div>
          <p class="copy-notification" data-account="224-910048-05507"></p>
        </div>
        <div class="flex-container">
          <div class="bank-detail-container">
            <span class="info1">이경미</span>
          </div>
          <div class="copy-button-container">
            <p class="number">국민은행<br>527825-94-103121</p>
            <button class="copy-button" data-account="527825-94-103121">복사</button>
          </div>
          <p class="copy-notification" data-account="527825-94-103121"></p>
        </div>
      </div>
    </dialog>
  </div>
</div>

  <script src="https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.js"></script>
  <script type="module">
    import Swiper from "https://cdn.jsdelivr.net/npm/swiper@10/swiper-bundle.min.mjs";

    const swiper = new Swiper(".swiper", {
      spaceBetween: 20,
      slidesPerView: 1.2,
      centeredSlides: true,
      loop: true,
      pagination: {
        el: ".swiper-pagination",
        clickable: true,
      },
    });

    const openDialog = (dialogId) => {
      const dialog = document.getElementById(dialogId);
      dialog.showModal();
    };

    window.openDialog = openDialog;

    let isCopied = false;

    const copyToClipboard = (text, notifElement) => {
      if (navigator.clipboard && typeof navigator.clipboard.writeText === "function") {
        navigator.clipboard.writeText(text).then(() => {
          console.log("텍스트 복사 성공");
          notifElement.textContent = "클립보드에 복사되었습니다";
          setTimeout(() => {
            notifElement.textContent = "";
          }, 1800);
        }, (err) => {
          console.log("텍스트 복사 실패", err);
        });
      } else {
        console.log("클립보드 API를 지원하지 않는 브라우저입니다.");
      }
    };

    document.addEventListener("DOMContentLoaded", () => {
      const copyButtons = document.querySelectorAll(".copy-button");
      copyButtons.forEach((button) => {
        button.addEventListener("click", (event) => {
          const accountNumber = event.target.getAttribute("data-account");
          const notifElement = event.target.parentElement.parentElement.querySelector(".copy-notification");
          copyToClipboard(accountNumber, notifElement);
        });
      });
    });

    function startNavigation() {
      Kakao.Navi.start({
        name: '용산가족공원 야외예식장',
        x: 126.9804702,
        y: 37.5238506,
        coordType: 'wgs84',
      });
    }

    let container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
    let options = { //지도를 생성할 때 필요한 기본 옵션
      center: new kakao.maps.LatLng(37.521138, 126.983937), //지도의 중심좌표.
      level: 3 //지도의 레벨(확대, 축소 정도)
    };

    let infowindow = new kakao.maps.InfoWindow({zIndex: 1});
    let map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴
    let places = new kakao.maps.services.Places();
    places.setMap(map);
    places.keywordSearch('용산가족공원 야외예식장', placesSearchCB);

    // 키워드 검색 완료 시 호출되는 콜백함수 입니다
    function placesSearchCB(data, status, pagination) {
      if (status === kakao.maps.services.Status.OK) {

        // 검색된 장소 위치를 기준으로 지도 범위를 재설정하기위해
        // LatLngBounds 객체에 좌표를 추가합니다
        let bounds = new kakao.maps.LatLngBounds();

        for (var i = 0; i < data.length; i++) {
          displayMarker(data[i]);
          bounds.extend(new kakao.maps.LatLng(data[i].y, data[i].x));
        }

        // 검색된 장소 위치를 기준으로 지도 범위를 재설정합니다
        map.setBounds(bounds);
      }
    }

    // 지도에 마커를 표시하는 함수입니다
    function displayMarker(place) {

      // 마커를 생성하고 지도에 표시합니다
      let marker = new kakao.maps.Marker({
        map: map,
        position: new kakao.maps.LatLng(place.y, place.x)
      });

      // 마커에 클릭이벤트를 등록합니다
      kakao.maps.event.addListener(marker, 'click', function () {
        // 마커를 클릭하면 장소명이 인포윈도우에 표출됩니다
        infowindow.setContent('<div style="padding:8px; font-size:12px; margin: 0 auto; font-weight: bold">' + place.place_name + '</div>');
        infowindow.open(map, marker);
      });
    }
  </script>
</body>
</html>
